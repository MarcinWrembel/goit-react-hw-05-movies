{"version":3,"file":"static/js/906.c2ac51eb.chunk.js","mappings":"qLACA,EAAgC,+BAAhC,EAAwE,wB,mBCoBxE,EAhBiB,kBACf,gBAAKA,UAAWC,EAAhB,UACE,SAAC,KAAD,CACEC,OAAQ,IACRC,MAAO,IACPC,OAAQ,EACRC,MAAM,UACNC,UAAU,wBACVC,aAAc,CAAC,EACfC,aAAa,GACbC,SAAS,EACTT,UAAWC,KAXA,C,kECHXS,EAAU,mCAAG,WAAMC,GAAN,gGAEQC,EAAAA,EAAAA,IAAUD,GAFlB,cAETE,EAFS,yBAGRA,GAHQ,wFAAH,sDAUhB,K,uJCuCA,EA/CwB,SAAAC,GACtB,OAAwCC,EAAAA,EAAAA,UAAS,IAAjD,eAAOC,EAAP,KAAqBC,EAArB,KACA,GAAkCF,EAAAA,EAAAA,WAAS,GAA3C,eAAOG,EAAP,KAAkBC,EAAlB,KACA,GAA0BJ,EAAAA,EAAAA,UAAS,MAAnC,eAAOK,EAAP,KAAcC,EAAd,KAyCA,OApCAC,EAAAA,EAAAA,YAAU,WACR,IAAMC,EAAiB,mCAAG,6FAClBZ,EAAM,GAAGa,OACbC,EAAAA,GACA,SACAX,EACA,oBACAW,EAAAA,GACA,mBAPsB,mBAWKf,EAAAA,EAAAA,GAAWC,GAXhB,UAWhBK,EAXgB,OAajBF,EAbiB,uBAcpBG,EAAgB,MAdI,6BAkBtBA,EAAgBD,EAAaU,KAAKC,SAE7BX,EApBiB,uBAqBd,IAAIY,MAAM,sDArBI,0DAwBtBP,EAAS,KAAMQ,SAxBO,yBA0BtBV,GAAa,GA1BS,6EAAH,qDA8BvBE,EAAS,MACTF,GAAa,GACbI,GACD,GAAE,CAACT,IAEG,CAAEI,UAAAA,EAAWE,MAAAA,EAAOJ,aAAAA,EAC5B,E,UChDD,EAAyB,uBAAzB,EAA6D,2BAA7D,EAA4G,kCAA5G,EAA+J,+BAA/J,EAAmN,mC,6BCqDnN,EAzCgB,WACd,IAAQc,GAAYC,EAAAA,EAAAA,MAAZD,QACR,EAA2CE,EAAgBF,GAAnDZ,EAAR,EAAQA,UAAWE,EAAnB,EAAmBA,MAAOJ,EAA1B,EAA0BA,aAM1B,OAJII,GACFa,EAAAA,GAAAA,MAAYb,GAGc,IAAxBJ,EAAakB,QACR,mEAGLlB,GAGA,iBAAKhB,UAAWmC,EAAhB,UACGjB,IAAa,SAACkB,EAAA,EAAD,KACd,eAAIpC,UAAWmC,EAAf,SACGnB,EAAaqB,KAAI,SAAAC,GAAM,OACtB,yBACE,qBAAStC,UAAWmC,EAApB,WACE,wBAAKG,EAAOC,UACZ,wBAAIC,EAAAA,EAAAA,IAAMF,EAAOG,YACjB,mBAAQzC,UAAWmC,EAAnB,UACE,eAAGnC,UAAWmC,EAAd,yBAEE,kBAAMO,SAAUJ,EAAOK,WAAvB,UACG,IACAL,EAAOK,WAAWC,MAAM,KAAK,eAT/BN,EAAOO,GADM,cANhC,CA2BD,C","sources":["webpack://react-homework-template/./src/components/spinner/Spinner.module.css?a11c","components/spinner/Spinner.js","functions/api.js","hooks/fetchReviews.js","webpack://react-homework-template/./src/pages/movieDetailsPage/reviews/Review.module.css?833a","pages/movieDetailsPage/reviews/Reviews.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"loaderWrapper\":\"Spinner_loaderWrapper__OsG+c\",\"loader\":\"Spinner_loader__yCPuB\"};","\nimport { BallTriangle } from 'react-loader-spinner';\nimport css from './Spinner.module.css';\nimport React from 'react';\n\n const Spinner = () => (\n  <div className={css.loaderWrapper}>\n    <BallTriangle\n      height={100}\n      width={100}\n      radius={5}\n      color=\"#3f51b5\"\n      ariaLabel=\"ball-triangle-loading\"\n      wrapperClass={{}}\n      wrapperStyle=\"\"\n      visible={true}\n      className={css.loader}\n    />\n  </div>\n);\n\nexport default Spinner;","import axios from 'axios';\n\nconst fetchMovie = async url => {\n  try {\n    const response = await axios.get(url);\n    return response;\n  } catch (error) {\n\n  }\n};\n\n\nexport default fetchMovie;\n","import fetchMovie from 'functions/api';\nimport { useEffect, useState } from 'react';\nimport base from '../data/api.json';\n\nconst useMovieReviews = movie_id => {\n  const [movieReviews, setMovieReviews] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  //https://api.themoviedb.org/3/movie/{movie_id}/reviews?api_key=<<api_key>>&language=en-US&page=1\n  //`${baseUrl}movie/${movieId}/reviews?api_key=${apiKey}&language=en-US&page=1`\n\n  useEffect(() => {\n    const fetchMovieReviews = async () => {\n      const url = ''.concat(\n        base.baseUrl,\n        'movie/',\n        movie_id,\n        '/reviews?api_key=',\n        base.KEY,\n        '&language=en-US'\n      );\n\n      try {\n        const movieReviews = await fetchMovie(url);\n\n        if (!movie_id) {\n          setMovieReviews(null);\n          return;\n        }\n\n        setMovieReviews(movieReviews.data.results);\n\n        if (!movieReviews) {\n          throw new Error('Getting detailed data is impossible in that moment');\n        }\n      } catch (error) {\n        setError(error.message);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    setError(null);\n    setIsLoading(true);\n    fetchMovieReviews();\n  }, [movie_id]);\n\n  return { isLoading, error, movieReviews };\n};\n\nexport default useMovieReviews;\n","// extracted by mini-css-extract-plugin\nexport default {\"review\":\"Review_review__M-wwA\",\"reviewList\":\"Review_reviewList__XrNwx\",\"reviewListArticle\":\"Review_reviewListArticle__d2mAq\",\"reviewListData\":\"Review_reviewListData__Lyw24\",\"reviewListCreation\":\"Review_reviewListCreation__nTM5U\"};","import { useParams } from 'react-router-dom';\nimport useMovieReviews from '../../../hooks/fetchReviews';\nimport Spinner from 'components/spinner/Spinner';\nimport rev from './Review.module.css';\nimport { toast } from 'react-toastify';\nimport PropTypes from 'prop-types';\nimport parse from 'html-react-parser';\n\n//strip html tags from string\n// import { stripHtml } from \"string-strip-html\";\n// <p>{stripHtml(review.content).result}</p>\n\n\nconst Reviews = () => {\n  const { movieID } = useParams();\n  const { isLoading, error, movieReviews } = useMovieReviews(movieID);\n\n  if (error) {\n    toast.error(error);\n  }\n\n  if (movieReviews.length === 0) {\n    return <h2>There is no any comment for this movie</h2>;\n  }\n\n  if (movieReviews) {\n    \n    return (\n      <div className={rev.review}>\n        {isLoading && <Spinner />}\n        <ul className={rev.reviewList}>\n          {movieReviews.map(review => (\n            <li key={review.id}>\n              <article className={rev.reviewListData}>\n                <h3>{review.author}</h3>\n                <p>{parse(review.content)}</p>\n                <footer className={rev.reviewListArticle}>\n                  <p className={rev.reviewListCreation}>\n                    Created at:\n                    <time dateTime={review.created_at}>\n                      {' '}\n                      {review.created_at.split('T')[0]}\n                    </time>\n                  </p>\n                </footer>\n              </article>\n            </li>\n          ))}\n        </ul>\n      </div>\n    );\n  }\n};\n\nexport default Reviews;\n\nReviews.propTypes = {\n  movieReviews: PropTypes.array,\n  id: PropTypes.string,\n  isLoading: PropTypes.bool,\n  error: PropTypes.string,\n  author: PropTypes.string,\n  created_at: PropTypes.string,\n  content: PropTypes.string,\n  movieID: PropTypes.string,\n};\n"],"names":["className","css","height","width","radius","color","ariaLabel","wrapperClass","wrapperStyle","visible","fetchMovie","url","axios","response","movie_id","useState","movieReviews","setMovieReviews","isLoading","setIsLoading","error","setError","useEffect","fetchMovieReviews","concat","base","data","results","Error","message","movieID","useParams","useMovieReviews","toast","length","rev","Spinner","map","review","author","parse","content","dateTime","created_at","split","id"],"sourceRoot":""}